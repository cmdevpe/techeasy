<!DOCTYPE html>
<html class="dark" lang="es">
<head>
    <meta charset="utf-8" />
    <meta content="width=device-width, initial-scale=1.0" name="viewport" />
    <title>Confirmación de Pedido - TechEase</title>
    <script src="https://cdn.tailwindcss.com?plugins=forms,container-queries"></script>
    <link href="https://fonts.googleapis.com" rel="preconnect" />
    <link crossorigin="" href="https://fonts.gstatic.com" rel="preconnect" />
    <link href="https://fonts.googleapis.com/css2?family=Space+Grotesk:wght@300..700&display=swap" rel="stylesheet" />
    <link href="https://fonts.googleapis.com/css2?family=Material+Symbols+Outlined" rel="stylesheet" />
    <script>
        tailwind.config = {
            darkMode: "class",
            theme: {
                extend: {
                    colors: {
                        "primary": "#0da6f2",
                        "background-light": "#f5f7f8",
                        "background-dark": "#101c22",
                    },
                    fontFamily: {
                        "display": ["Space Grotesk", "sans-serif"]
                    },
                    borderRadius: {
                        "DEFAULT": "0.25rem",
                        "lg": "0.5rem",
                        "xl": "0.75rem",
                        "full": "9999px"
                    },
                },
            },
        }
    </script>
    <style>
        .material-symbols-outlined {
            font-variation-settings:
                'FILL' 0,
                'wght' 400,
                'GRAD' 0,
                'opsz' 24
        }
    </style>
</head>
<body class="bg-background-light dark:bg-background-dark font-display text-gray-800 dark:text-gray-200">
    <div class="relative flex h-auto min-h-screen w-full flex-col overflow-x-hidden">
        <div class="layout-container flex h-full grow flex-col">
            <header class="flex items-center justify-between whitespace-nowrap border-b border-solid border-gray-200 dark:border-b-[#283339] px-6 sm:px-10 md:px-20 lg:px-40 py-3">
                <div class="flex items-center gap-4 text-gray-900 dark:text-white">
                    <div class="size-6 text-primary">
                        <svg fill="none" viewbox="0 0 48 48" xmlns="http://www.w3.org/2000/svg">
                            <path d="M24 45.8096C19.6865 45.8096 15.4698 44.5305 11.8832 42.134C8.29667 39.7376 5.50128 36.3314 3.85056 32.3462C2.19985 28.361 1.76794 23.9758 2.60947 19.7452C3.451 15.5145 5.52816 11.6284 8.57829 8.5783C11.6284 5.52817 15.5145 3.45101 19.7452 2.60948C23.9758 1.76795 28.361 2.19986 32.3462 3.85057C36.3314 5.50129 39.7376 8.29668 42.134 11.8833C44.5305 15.4698 45.8096 19.6865 45.8096 24L24 24L24 45.8096Z" fill="currentColor"></path>
                        </svg>
                    </div>
                    <h2 class="text-xl font-bold leading-tight tracking-[-0.015em]">TechEase</h2>
                </div>
                <div class="hidden md:flex flex-1 justify-end gap-8">
                    <div class="flex items-center gap-9">
                        <a class="text-sm font-medium leading-normal text-gray-700 dark:text-gray-300 hover:text-primary dark:hover:text-primary" href="index.html">Inicio</a>
                        <a class="text-sm font-medium leading-normal text-gray-700 dark:text-gray-300 hover:text-primary dark:hover:text-primary" href="index.html">Productos</a>
                    </div>
                </div>
            </header>

            <main class="flex flex-1 justify-center py-8 px-4 sm:px-6 md:px-8">
                <div class="layout-content-container flex flex-col w-full max-w-4xl flex-1">
                    
                    <div id="order-success-container">
                        <div class="flex flex-col items-center justify-center text-center">
                            <div class="mb-4 flex h-20 w-20 items-center justify-center rounded-full bg-green-100 dark:bg-green-900/40">
                                <span class="material-symbols-outlined text-4xl text-green-500 dark:text-green-400">check_circle</span>
                            </div>
                            <h1 class="text-gray-900 dark:text-white tracking-tight text-3xl sm:text-4xl font-bold leading-tight pb-2">¡Gracias por tu compra!</h1>
                            <p class="text-gray-600 dark:text-gray-400 text-base font-normal leading-normal max-w-lg">Hemos recibido tu pedido y te hemos enviado un correo de confirmación con todos los detalles.</p>
                        </div>
                        
                        <div class="mt-8 bg-white dark:bg-[#1b2327] rounded-xl shadow-sm border border-gray-200 dark:border-gray-700/50 p-6 sm:p-8">
                            <div class="flex flex-col md:flex-row justify-between items-start gap-4 pb-6 border-b border-gray-200 dark:border-gray-700/50">
                                <div>
                                    <p class="text-base text-gray-600 dark:text-gray-400">Número de Pedido</p>
                                    <p id="order-number" class="text-xl font-bold text-gray-900 dark:text-white tracking-tight">#</p>
                                </div>
                                <div>
                                    <p class="text-base text-gray-600 dark:text-gray-400">Llegada estimada</p>
                                    <p id="order-delivery" class="text-xl font-bold text-gray-900 dark:text-white">-</p>
                                </div>
                            </div>
                            <div class="pt-6">
                                <h2 class="text-gray-900 dark:text-white text-xl font-bold leading-tight tracking-[-0.015em] mb-4">Resumen del Pedido</h2>
                                <ul id="order-items-list" class="space-y-4">
                                    </ul>
                            </div>
                            <div class="py-6 mt-6 border-t border-gray-200 dark:border-gray-700/50">
                                <div class="space-y-2">
                                    <div class="flex justify-between text-base text-gray-600 dark:text-gray-400">
                                        <span>Subtotal</span>
                                        <span id="order-subtotal">S/ 0.00</span>
                                    </div>
                                    <div class="flex justify-between text-base text-gray-600 dark:text-gray-400">
                                        <span>Envío</span>
                                        <span id="order-shipping">S/ 0.00</span>
                                    </div>
                                    <div class="flex justify-between text-base text-gray-600 dark:text-gray-400">
                                        <span>Impuestos</span>
                                        <span id="order-tax">S/ 0.00</span>
                                    </div>
                                </div>
                                <div class="flex justify-between text-lg font-bold text-gray-900 dark:text-white mt-4 pt-4 border-t border-gray-200 dark:border-gray-700/50">
                                    <span>Total</span>
                                    <span id="order-total">S/ 0.00</span>
                                </div>
                            </div>
                            </div>
                        <div class="mt-8 flex flex-col sm:flex-row items-center justify-center gap-4">
                            <a href="index.html" class="flex w-full sm:w-auto max-w-xs cursor-pointer items-center justify-center overflow-hidden rounded-lg h-12 bg-gray-200 dark:bg-gray-700 text-gray-800 dark:text-gray-200 gap-2 text-base font-bold leading-normal tracking-wide min-w-0 px-6 hover:bg-gray-300 dark:hover:bg-gray-600 transition-colors">
                                Volver a la Página Principal
                            </a>
                        </div>
                    </div>
                    
                    <div id="order-error-container" class="hidden text-center py-16">
                         <div class="flex flex-col items-center justify-center text-center">
                            <div class="mb-4 flex h-20 w-20 items-center justify-center rounded-full bg-red-100 dark:bg-red-900/40">
                                <span class="material-symbols-outlined text-4xl text-red-500 dark:text-red-400">error</span>
                            </div>
                            <h1 class="text-gray-900 dark:text-white tracking-tight text-3xl sm:text-4xl font-bold leading-tight pb-2">No se encontró el pedido</h1>
                            <p class="text-gray-600 dark:text-gray-400 text-base font-normal leading-normal max-w-lg">No pudimos encontrar los detalles de tu pedido. Es posible que tu sesión haya expirado.</p>
                            <a href="index.html" class="mt-8 flex w-full sm:w-auto max-w-xs cursor-pointer items-center justify-center overflow-hidden rounded-lg h-12 bg-primary text-white gap-2 text-base font-bold leading-normal tracking-wide min-w-0 px-6 hover:bg-primary/90 transition-colors">
                                Volver a la Página Principal
                            </a>
                        </div>
                    </div>

                </div>
            </main>
            
            <footer class="mt-16 w-full border-t border-gray-200 dark:border-gray-800 px-6 sm:px-10 md:px-20 lg:px-40 py-8 text-center text-gray-500 dark:text-gray-400">
                <div class="max-w-4xl mx-auto">
                    <p class="text-sm">© 2025 TechEase. Todos los derechos reservados.</p>
                </div>
            </footer>
        </div>
    </div>
    
    <script type="module">
        document.addEventListener("DOMContentLoaded", () => {
            const orderDataString = sessionStorage.getItem('techEaseLastOrder');
            
            const successContainer = document.getElementById('order-success-container');
            const errorContainer = document.getElementById('order-error-container');

            if (!orderDataString) {
                // No hay datos del pedido, mostrar error
                successContainer.classList.add('hidden');
                errorContainer.classList.remove('hidden');
                return;
            }

            try {
                const orderData = JSON.parse(orderDataString);

                // Popular datos del pedido
                document.getElementById('order-number').textContent = orderData.orderNumber;
                document.getElementById('order-delivery').textContent = orderData.estimatedDelivery;

                // Popular totales
                document.getElementById('order-subtotal').textContent = `S/ ${orderData.subtotal}`;
                // Usamos la lógica de envío del checkout (Gratis/S/ 0.00)
                document.getElementById('order-shipping').textContent = `S/ ${orderData.shipping}`; 
                document.getElementById('order-tax').textContent = `S/ ${orderData.tax}`;
                document.getElementById('order-total').textContent = `S/ ${orderData.total}`;

                // Popular lista de items
                const itemsList = document.getElementById('order-items-list');
                itemsList.innerHTML = ''; // Limpiar
                
                orderData.items.forEach(item => {
                    const itemTotal = (item.price * item.quantity).toFixed(2);
                    const itemHTML = `
                        <li class="flex items-center gap-4">
                            <div class="w-16 h-16 bg-gray-100 dark:bg-gray-800 rounded-lg flex-shrink-0">
                                <img class="h-full w-full object-cover rounded-lg" alt="${item.alt}" src="${item.img}"/>
                            </div>
                            <div class="flex-grow">
                                <p class="font-semibold text-gray-900 dark:text-white">${item.name}</p>
                                <p class="text-sm text-gray-500 dark:text-gray-400">Cantidad: ${item.quantity}</p>
                            </div>
                            <p class="font-semibold text-gray-900 dark:text-white text-right">S/ ${itemTotal}</p>
                        </li>
                    `;
                    itemsList.insertAdjacentHTML('beforeend', itemHTML);
                });
                
                // (Opcional) Limpiar el sessionStorage después de mostrarlo
                // sessionStorage.removeItem('techEaseLastOrder'); 

            } catch (e) {
                console.error("Error al parsear datos del pedido:", e);
                successContainer.classList.add('hidden');
                errorContainer.classList.remove('hidden');
            }
        });
    </script>
</body>
</html>